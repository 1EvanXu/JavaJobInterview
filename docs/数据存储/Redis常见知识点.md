## Redis 

### 特点：

- 完全基于内存
- 数据结构简单，对数据操作也简单
- 使用多路I/O复用模型

### 可使用的数据结构？

字符串、散列hashmap、列表list，集合set，有序集合zset

### Redis过期策略？

1. 定时删除（占cpu影响性能，无人用）
2. 惰性删除（取出时决定删除，可能会出现内存泄漏--默认策略）
3. 定期删除（时长难以设定）

### Redis消息队列？
包含发布订阅模式（推拉）和生产者消费者模式（阻塞队列）。

后者能保证每个消息至多被消费一次。需要的部分包括支持序列化的消息，主题配置，借助RedisTemplate发送。

### Redis快照？

有两种方式存储快照，AOF和RDB。
- AOF保存所有的操作指令。RDB保存即时点上的数据集。因此：
- RDB重启时恢复比AOF快，更适合用作备份，在运行时使用fork子进程完成持久化，但这个操作会停止客户端一段时间。
- AOF最多丢失1秒内的更新数据，但是AOF文件体积可能比数据集还大。

### 应用场景？

1. 缓存-热数据
2. 计数器-点赞，访问次数
3. 简单的消息队列
4. 分布式锁
5. 最新列表
6. 排行榜

### Redis与Memcached的比较：

1. M只支持k/v类型
2. M不支持数据持久化
3. R支持数据的备份，即master-slave模式的数据备份。
4. M是多线程，非阻塞IO复用
5. R单个value的最大限制是1G，M最多是1M

### Redis为什么使用单线程？

Redis是基于内存的数据库，因此内存或网络带宽而非CPU才是瓶颈所在。而单线程比多线程更容易实现。

### Redis集群设计：

- Redis使用哈希槽实现集群，通过CRC16校验后对16384取模决定放置到哪个节点。
- 集群特点：
    1. 所有的节点互联，内部使用二进制协议优化传输速度和带宽
    2. 节点的fail是通过集群中超过半数的节点检测失效时才生效
    3. 客户端与redis节点（任何可用的）直连

